26/07/17:
ALTER TABLE `user_images` ADD `image_active_status` TINYINT( 1 ) NOT NULL DEFAULT '0' AFTER `user_profile_id` ;
ALTER TABLE `renew_detail` CHANGE `ending_date` `ending_date` TIMESTAMP NULL DEFAULT NULL;
ALTER TABLE `renew_detail` CHANGE `totalno_of_profile` `totalno_of_profile` INT( 11 ) NOT NULL DEFAULT '60';
ALTER TABLE `reg_payment` CHANGE `enddate` `enddate` TIMESTAMP NULL DEFAULT NULL;
ALTER TABLE `reg_payment` ADD `totalno_of_profile` INT(11) NOT NULL DEFAULT '60' AFTER `period_in_month`;


update reg_payment set totalno_of_profile = 60 where period_in_month = 3;
update reg_payment set totalno_of_profile = 120 where period_in_month = 6;
UPDATE reg_userdetail SET user_online_or_simple =  'online' WHERE userdetail_profile_id =0;
UPDATE reg_userdetail SET user_online_or_simple =  'simple' WHERE userdetail_profile_id !=0;

ALTER TABLE `reg_userdetail` CHANGE `userdetail_profile_id` `userdetail_profile_id` INT(11) NULL DEFAULT NULL;
ALTER TABLE `reg_userdetail` DROP INDEX `userdetail_profile_id`;


30/07/17:
ALTER TABLE `reg_userdetail` CHANGE `user_maritalstatus` `user_maritalstatus` INT(11) NULL DEFAULT NULL;

ALTER TABLE `reg_communication_family` CHANGE `comm_residence` `comm_residence` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL, CHANGE `comm_current_countrycountry` `comm_current_countrycountry` VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL;


31/07/17:
Default Image Male and Female update based on gender:
UPDATE  user_images img
        INNER JOIN reg_userdetail usr
            ON img.reg_user_id = usr.userdetail_id
SET img.images = 'defalt_male.jpg' where usr.user_gender = 1 AND img.images = ''; 

Updated : 9405 rows affected

UPDATE  user_images img
        INNER JOIN reg_userdetail usr
            ON img.reg_user_id = usr.userdetail_id
SET img.images = 'defalt_female.jpg' where usr.user_gender = 2 AND img.images = ''; 

Updated : 4360 rows affected


Find age and update by date of birth: (total : 33185 updated for age 0)

UPDATE `reg_userdetail` 
SET user_age =((DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT(`user_dob`, '%Y')) - 
    (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT(`user_dob`, '00-%m-%d'))) where user_age = 0;

Migration query:

INSERT INTO vallikodi_server.user_images(`reg_user_id`,`images`,`user_profile_id`) SELECT user_id,image,user_profile from BBBn3tl_test.ict_image where image != '';

DROP TABLE user_images;


TRUNCATE food;
INSERT INTO vallikodi_server.food(name,active_status,delete_status,added_date) SELECT name,active_status,delete_status,added_date from BBBn3tl_test.food;


01/08/17:
1345812014.jpg
1378442592.jpg
1378442464.jpg

UPDATE `success_stories` SET `active_status` = '0' WHERE `success_stories`.`successstories_id` = 32; UPDATE `success_stories` SET `active_status` = '0' WHERE `success_stories`.`successstories_id` = 36; UPDATE `success_stories` SET `active_status` = '0' WHERE `success_stories`.`successstories_id` = 37;

update reg_userdetail set user_gender = 2 where userdetail_id='66951' OR userdetail_id='67279' OR userdetail_id='66160' OR userdetail_id='65420' OR userdetail_id='67797';

ALTER TABLE `reg_payment` CHANGE `no_of_profiles_viewed` `no_of_profiles_viewed` INT( 5 ) NOT NULL DEFAULT '0';

09/08/17:
ALTER TABLE `reg_userdetail` ADD `userdetail_file_id` INT( 11 ) NOT NULL DEFAULT '0' COMMENT 'It will enter by admin for both online and simple user' AFTER `userdetail_profile_id` ;

Migration query for updation: (41765 rows affected)
UPDATE 
  BBBn3tl_test.user_detail, 
  vallikodi_server_new.reg_userdetail 
SET 
  vallikodi_server_new.reg_userdetail.userdetail_file_id = BBBn3tl_test.user_detail.file_id
WHERE 
  vallikodi_server_new.reg_userdetail.userdetail_id = BBBn3tl_test.user_detail.id;

update reg_userdetail set user_online_or_simple = 'online' where user_online_or_simple = 'Online';

11/08/17:
ALTER TABLE `renew_detail` ADD `ren_bill_number` VARCHAR( 100 ) NOT NULL AFTER `plan_id` ,
ADD `ren_bank_name` VARCHAR( 200 ) NOT NULL AFTER `ren_bill_number` ,
ADD `ren_cheque_dd_number` VARCHAR( 50 ) NOT NULL AFTER `ren_bank_name` ,
ADD `ren_amount` INT( 11 ) NOT NULL AFTER `ren_cheque_dd_number` ,
ADD `ren_period_in_month` INT( 11 ) NOT NULL AFTER `ren_amount` ;

17/08/17:
ALTER TABLE `reg_userdetail` ADD `user_featured_profile_status` TINYINT( 1 ) NOT NULL DEFAULT '0' COMMENT 'Store this status whether it is showing in home page or not' AFTER `user_registeredby` ;

ALTER TABLE `user_images` DROP `image_active_status`;

no need to run(just for reference)
Query to generate report of active online user from the year 2014 to 2017:
SELECT * FROM reg_userdetail as usr INNER JOIN reg_payment as pay ON pay.reg_user_id = usr.userdetail_id where user_online_or_simple = 'online' AND user_active_status = 1 AND EXTRACT(YEAR FROM usr.user_added_date) >= '2014' ORDER BY usr.user_added_date DESC;

old db check report:
SELECT * FROM `user_detail` WHERE profile_id=0 AND active_status = 1 AND EXTRACT(YEAR FROM created_date) >= '2014' ORDER BY id DESC



total:42289
male: 16395
female: 7930
non-gender: 17964

SELECT userdetail_id,userdetail_profile_id,user_gender,user_fname,user_email,user_added_date FROM `reg_userdetail` WHERE user_gender = 1 ORDER BY userdetail_id desc ;



defalt_male = 9405
defalt_female = 4360

no image = 13765
total male and female records = 24325


SELECT * FROM `reg_userdetail` WHERE user_added_date BETWEEN '2017-07-07' AND '2017-08-17';

